<html>
    <head>
        <title>Wopson and Co.</title>
        <link rel="stylesheet" href="css/styles.css">
        <script src="js/clock.js"></script>
        <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    </head>
    <body>
        <div class="CartCorner"><a href="cart.html">Cart</a><img src="images/cart.png" height="20" width="20"></div>
        <h1 class="head">WOPSON & CO.</h1>
        <nav id="nav">
            <ul>
                <li><a href="index.html">HOME</a></li>
                <li><a href="tshirt.html">T-SHIRT MAKER</a></li>
                <li><a href="about.html">ABOUT</a></li>
            </ul>
        </nav>
        <div class="missionbox">
            <h2 class="mission">Cart</h2>
            <div id="cartStatus">
                <p>Your cart is currently empty.</p>
                <a href="tshirt.html">You can create your own shirt here.</a>
            </div>
            <div id="cartContent">
                <div class="cartShirt">
                    <object id="back" type="image/svg+xml" data="images/shirt.svg">
                        Your browser does not support SVG
                    </object>
                </div>
                <form id="cartForm" method="get" action="#">
                    <h2>T-shirt details</h2>
                    <p id="size"> Size: </p>
                    <p id="color"> Color: </p>
                    <p id="imagecart"> Image: </p>
                    <label for="slctDrop">Amount:</label>
                    <!--select list-->
                    <select id="slctDrop" name="slctDrop" onchange="dropDownPrice()" required>
                        <option value="1" selected>One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                    </select>
                    <h3 id="price">Current Price: </h3>
                    <div>
                        <input id="inputSubmit" class="btn" type="submit" value="Submit"/>
                    </div>
                </form>

            </div>
        </div>
        <footer id="foot">
            <h3 class="h3foot">Links</h3>
            <ul>
                <li><a href="index.html">HOME</a></li>
                <li><a href="tshirt.html">T-SHIRT MAKER</a></li>
                <li><a href="about.html">ABOUT</a></li>
            </ul>
            <div id="copy">Copyright &copy; 2018, <a href="#" onclick="window.location.reload(true);">Wopson &amp; Co.</a></div>
            <p id="clockstop"></p>
        </footer>
        <script>
            var url_string = window.location.href; //"http://www.example.com/t.html?a=1&b=3&c=m2-m3-m4-m5"; //window.location.href
            var url = new URL(url_string);
            var size = url.searchParams.get("radio");
            var color = url.searchParams.get("radioColor");
            var image = url.searchParams.get("inputFile");
            $('#cartContent').slideUp(0);
            if(size != null){
                $('#cartStatus').slideUp(0);
                $('#size').append(size);
                $('#color').append(color);
                $('#imagecart').append(image);
                $('#cartContent').slideDown(1000);
                document.getElementById("back").addEventListener("load", function(){
                    // Get the Object by ID
                    var a = document.getElementById("back");
                    // Get the SVG document inside the Object tag
                    var svgDoc = a.contentDocument;
                    // Get one of the SVG items by ID;
                    var svgItem = svgDoc.getElementById("path61742");
                    // Set the colour to something else
                    svgItem.removeAttribute("style");
                    if(color=="White"){
                        svgItem.setAttribute("fill", "whitesmoke");
                    }else{
                        svgItem.setAttribute("fill", color);
                    }
                });
            }
            $('#price').append("&dollar;19.99");
            function decodeHtml(html) {
                    var txt = document.createElement("textarea");
                    txt.innerHTML = html;
                    return txt.value;
            }
            function dropDownPrice(){
                var e = document.getElementById("slctDrop");
                var num = e.options [e.selectedIndex] .value;
                console.log(num);
                if(num=='1'){
                    $('#price').text('Current Price: '+decodeHtml('&dollar;')+'19.99');
                }
                else if(num=='2'){
                    $('#price').text('Current Price: '+decodeHtml('&dollar;')+'29.99');
                }
                else{
                    $('#price').text('Current Price: '+decodeHtml('&dollar;')+'39.99');
                }
            }
        </script>
    </body>
</html>